%Asynchronous message passing systems are fast becoming a common means for communication between devices.
%
A prevalent asynchronous message passing standard is the message passing interface (MPI).
%
A problem in any MPI program, intended or otherwise, is message race where a receive may match more than one send in a runtime system.
%
This message non-determinism is notorious for its difficulty to test or debug without exploring the full program state space. 
%
Further, MPI collective operations may also impact how messages communicate.
%
Consequently, MPI semantics become more difficult to analyze formally. 
%
As both runtime semantics, infinite buffer (message is copied into a runtime buffer on the API call) and zero buffer (message has no buffering), are imperatively requested by many MPI applications, both should be supported in a formal analysis. 
%
This paper presents an algorithm that encodes an MPI execution as a Satisfiability Modulo Theories (SMT) problem, which if satisfiable, yields a feasible schedule on the same trace, such that it resolves message non-determinism in a way that it now fails user provided assertions.
%
This algorithm correctly defines MPI point-to-point communication and MPI collective communication with respective rules for both infinite buffer semantics and zero buffer semantics. 
%
The zero buffer encoding is further capable of precisely detecting zero buffer compatibility for an MPI program. 
%
If the compatibility is proved, the MPI program is executable under zero buffer semantics.
%
Experiments demonstrate that the SMT encoding is correct and efficient for a set of benchmarks. 
%
%The encoding scales well for programs with a high level of message non-determinism in how sends and receives may potentially match.